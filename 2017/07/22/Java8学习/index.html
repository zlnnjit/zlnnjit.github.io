<!DOCTYPE html>
<html>
<head hexo-theme='https://volantis.js.org/#2020'>
  <meta charset="utf-8">
  <!-- SEO相关 -->
  
    
  
  <!-- 渲染优化 -->
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- 页面元数据 -->
  
    <title>Java8学习 - zln&#39;s blog</title>
  
    <meta name="keywords" content="java8,javase高级特性">
  
  
    <meta name="description" content="Java8 新特性介绍
速度更快
代码更少（增加了新的语法 Lambda  表达式）
强大的Stream API
便于并行
最大化减少空指针异常Optional
">
  

  <!-- feed -->
  

  <!-- import meta -->
  

  <!-- link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css">
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">

  

  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
  

  <!-- import link -->
  

  
    
<link rel="stylesheet" href="/css/style.css">

  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
  
</head>

<body>
  
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>
<header class="l_header shadow blur">

  <div class='wrapper'>
    <div class='nav-sub container--flex'>
      <a class="logo flat-box"></a>
      <ul class='switcher h-list'>
        <li><a class="s-comment flat-btn fas fa-comments fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
          <li><a class="s-toc flat-btn fas fa-list fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
      </ul>
    </div>
		<div class="nav-main container container--flex">
      
        
        <a class="logo flat-box" target="_self" href='/'>
          
          
          
          
            周陆宁 <b><sup style='color:#3AA757'>2020</sup></b>
          
        </a>
      

			<div class='menu navigation'>
				<ul class='h-list'>
          
          
          
            
            
              <li>
                <a class="flat-box" href=/
                  
                  
                  
                    id="home"
                  >
                  
                    <i class='fas fa-rss fa-fw'></i>
                  
                  博客
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  
                    <i class='fas fa-folder-open fa-fw'></i>
                  
                  分类
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  
                    <i class='fas fa-tags fa-fw'></i>
                  
                  标签
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  
                    <i class='fas fa-archive fa-fw'></i>
                  
                  归档
                </a>
                
              </li>
            
          
          
				</ul>
			</div>

      
        <div class="m_search">
          <form name="searchform" class="form u-search-form">
            <i class="icon fas fa-search fa-fw"></i>
            <input type="text" class="input u-search-input" placeholder="搜索" />
          </form>
        </div>
      

			<ul class='switcher h-list'>
				
					<li><a class="s-search flat-btn fas fa-search fa-fw" target="_self" href='javascript:void(0)'></a></li>
				
				<li><a class="s-menu flat-btn fas fa-bars fa-fw" target="_self" href='javascript:void(0)'></a></li>
			</ul>
		</div>
	</div>
</header>
<ul class="menu-phone navigation white-box">
  
  
    <li>
      <a class="flat-box" href=/
        
        
        
          id="home"
        >
        
          <i class='fas fa-rss fa-fw'></i>
        
        博客
      </a>
    </li>
  
    <li>
      <a class="flat-box" href=/categories/
        
        
        
          id="categories"
        >
        
          <i class='fas fa-folder-open fa-fw'></i>
        
        分类
      </a>
    </li>
  
    <li>
      <a class="flat-box" href=/tags/
        
        
        
          id="tags"
        >
        
          <i class='fas fa-tags fa-fw'></i>
        
        标签
      </a>
    </li>
  
    <li>
      <a class="flat-box" href=/archives/
        
        
        
          id="archives"
        >
        
          <i class='fas fa-archive fa-fw'></i>
        
        归档
      </a>
    </li>
  
    <li>
      <a class="flat-box" href=/friends/
        
        
        
          id="friends"
        >
        
          <i class='fas fa-link fa-fw'></i>
        
        友链
      </a>
    </li>
  
    <li>
      <a class="flat-box" href=/about/
        
        
        
          id="about"
        >
        
          <i class='fas fa-info-circle fa-fw'></i>
        
        关于
      </a>
    </li>
  
</ul>
<script>setLoadingBarProgress(40);</script>



  <div class="l_body nocover">
    <div class='body-wrapper'>
      

<div class='l_main'>
  

  
    <article id="post" class="post white-box shadow article-type-post" itemscope itemprop="blogPost">
      


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  
    <h1 class="title">
      <a href="/2017/07/22/Java8%E5%AD%A6%E4%B9%A0/">
        Java8学习
      </a>
    </h1>
  


      
      <div class='new-meta-box'>
        
          
        
          
            
<div class='new-meta-item author'>
  <a href="https://bcoder.top" target="_blank" rel="nofollow noopener">
    <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png">
    <p>周陆宁</p>
  </a>
</div>

          
        
          
            
  
  <div class='new-meta-item category'>
    <a href='/categories/java/' rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>java</p>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>发布于：2017-07-22 18:58:09</p>
  </a>
</div>

          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


      <section class="article typo">
        <div class="article-entry" itemprop="articleBody">
          
          <h2 id="Java8-新特性介绍"><a href="#Java8-新特性介绍" class="headerlink" title="Java8 新特性介绍"></a>Java8 新特性介绍</h2><ul>
<li>速度更快</li>
<li>代码更少（增加了新的语法 Lambda  表达式）</li>
<li>强大的Stream API</li>
<li>便于并行</li>
<li>最大化减少空指针异常Optional</li>
</ul>
<a id="more"></a>

<h2 id="Lambda-表达式"><a href="#Lambda-表达式" class="headerlink" title="Lambda 表达式"></a>Lambda 表达式</h2><h3 id="为什么使用Lambda表达式"><a href="#为什么使用Lambda表达式" class="headerlink" title="为什么使用Lambda表达式"></a>为什么使用Lambda表达式</h3><p>Lambda 是一个 <strong>匿名函数</strong>，我们可以把 Lambda表达式理解为是 <strong>一段可以传递的代码</strong>（将代码像数据一样进行传递）。可以写出更简洁、更灵活的代码。作为一种更紧凑的代码风格，使Java的语言表达能力得到了提升。</p>
<p>demo1:匿名内部类的使用以及Lambda表达式的使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用 匿名内部类</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo1</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Comparator&lt;Integer&gt; comparator = <span class="keyword">new</span> Comparator&lt;Integer&gt;() &#123;</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Integer o1, Integer o2)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> Integer.compare(o1, o2);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	TreeSet&lt;Integer&gt; set = <span class="keyword">new</span> TreeSet&lt;&gt;(comparator);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Lambda</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo1_2</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Comparator&lt;Integer&gt; comparator = (x,y)-&gt;Integer.compare(x, y);</span><br><span class="line">	TreeSet&lt;Integer&gt; set = <span class="keyword">new</span> TreeSet&lt;&gt;(comparator);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>demo2:获取公司中年龄小于 35 的员工信息和获取公司中工资大于 5000 的员工信息</p>
<p>定义实体类：<br>Employee.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.bcoder.java8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> salary;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">( String name, <span class="keyword">int</span> age, <span class="keyword">double</span> salary)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">		<span class="keyword">this</span>.salary = salary;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSalary</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> salary;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSalary</span><span class="params">(<span class="keyword">double</span> salary)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.salary = salary;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"测试方法引用！"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Employee [name="</span> + name + <span class="string">", age="</span> + age + <span class="string">", salary="</span> + salary + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>主程序;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Employee&gt; list = Arrays.asList(</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"张三"</span>, <span class="number">18</span>, <span class="number">9999.99</span>),</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"李四"</span>, <span class="number">59</span>, <span class="number">6666.66</span>),</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"王五"</span>, <span class="number">28</span>, <span class="number">3333.33</span>),</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"赵六"</span>, <span class="number">8</span>, <span class="number">7777.77</span>),</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"田七"</span>, <span class="number">38</span>, <span class="number">5555.55</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title">filterEmployeeAge</span><span class="params">(List&lt;Employee&gt; list)</span></span>&#123;</span><br><span class="line">	List&lt;Employee&gt; emps = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	<span class="keyword">for</span> (Employee emp : list) &#123;</span><br><span class="line">		<span class="keyword">if</span>(emp.getAge()&lt;<span class="number">35</span>)&#123;</span><br><span class="line">			emps.add(emp);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> emps;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title">filterEmployeeSalary</span><span class="params">(List&lt;Employee&gt; list)</span></span>&#123;</span><br><span class="line">	List&lt;Employee&gt; emps = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	<span class="keyword">for</span> (Employee emp : list) &#123;</span><br><span class="line">		<span class="keyword">if</span>(emp.getSalary()&gt;<span class="number">5000</span>)&#123;</span><br><span class="line">			emps.add(emp);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> emps;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo2</span><span class="params">()</span></span>&#123;</span><br><span class="line">	List&lt;Employee&gt; emps1 = filterEmployeeAge(list);</span><br><span class="line">	System.out.println(<span class="string">"年龄小于35的人："</span>);</span><br><span class="line">	<span class="keyword">for</span> (Employee employee : emps1) &#123;</span><br><span class="line">		System.out.println(employee);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	List&lt;Employee&gt; emps2 = filterEmployeeSalary(list);</span><br><span class="line">	System.out.println(<span class="string">"工资大于5000的人"</span>);</span><br><span class="line">	<span class="keyword">for</span> (Employee employee : emps2) &#123;</span><br><span class="line">		System.out.println(employee);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">年龄小于35的人：</span><br><span class="line">Employee [name&#x3D;张三, age&#x3D;18, salary&#x3D;9999.99]</span><br><span class="line">Employee [name&#x3D;王五, age&#x3D;28, salary&#x3D;3333.33]</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">工资大于5000的人</span><br><span class="line">Employee [name&#x3D;张三, age&#x3D;18, salary&#x3D;9999.99]</span><br><span class="line">Employee [name&#x3D;李四, age&#x3D;59, salary&#x3D;6666.66]</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">Employee [name&#x3D;田七, age&#x3D;38, salary&#x3D;5555.55]</span><br></pre></td></tr></table></figure>
<p>demo3：对demo2使用设计模式的思想进行代码优化(策略设计模式)<br>定义接口;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.bcoder.java8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyCondition</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">check</span><span class="params">(T t)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义两个接口的实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.bcoder.java8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConditionByAge</span> <span class="keyword">implements</span> <span class="title">MyCondition</span>&lt;<span class="title">Employee</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">check</span><span class="params">(Employee t)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> t.getAge()&lt;<span class="number">35</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.bcoder.java8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConditionBySalary</span> <span class="keyword">implements</span> <span class="title">MyCondition</span>&lt;<span class="title">Employee</span>&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">check</span><span class="params">(Employee t)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> t.getSalary()&gt;<span class="number">5000</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>主程序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title">filterEmployee</span><span class="params">(List&lt;Employee&gt; list,MyCondition&lt;Employee&gt; condition)</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	List&lt;Employee&gt; emps = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	<span class="keyword">for</span> (Employee emp : list) &#123;</span><br><span class="line">		<span class="keyword">if</span>(condition.check(emp))&#123;</span><br><span class="line">			emps.add(emp);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> emps;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo3</span><span class="params">()</span></span>&#123;</span><br><span class="line">	List&lt;Employee&gt; emps1 = filterEmployee(list,<span class="keyword">new</span> MyConditionByAge());</span><br><span class="line">	System.out.println(<span class="string">"年龄小于35的人："</span>);</span><br><span class="line">	<span class="keyword">for</span> (Employee employee : emps1) &#123;</span><br><span class="line">		System.out.println(employee);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	List&lt;Employee&gt; emps2 = filterEmployee(list,<span class="keyword">new</span> MyConditionBySalary());</span><br><span class="line">	System.out.println(<span class="string">"工资大于5000的人"</span>);</span><br><span class="line">	<span class="keyword">for</span> (Employee employee : emps2) &#123;</span><br><span class="line">		System.out.println(employee);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">年龄小于35的人：</span><br><span class="line">Employee [name&#x3D;张三, age&#x3D;18, salary&#x3D;9999.99]</span><br><span class="line">Employee [name&#x3D;王五, age&#x3D;28, salary&#x3D;3333.33]</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">工资大于5000的人</span><br><span class="line">Employee [name&#x3D;张三, age&#x3D;18, salary&#x3D;9999.99]</span><br><span class="line">Employee [name&#x3D;李四, age&#x3D;59, salary&#x3D;6666.66]</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">Employee [name&#x3D;田七, age&#x3D;38, salary&#x3D;5555.55]</span><br></pre></td></tr></table></figure>

<p>demo4:使用匿名内部类对demo2进行优化</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title">filterEmployee</span><span class="params">(List&lt;Employee&gt; list,MyCondition&lt;Employee&gt; condition)</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	List&lt;Employee&gt; emps = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	<span class="keyword">for</span> (Employee emp : list) &#123;</span><br><span class="line">		<span class="keyword">if</span>(condition.check(emp))&#123;</span><br><span class="line">			emps.add(emp);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> emps;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo4</span><span class="params">()</span></span>&#123;</span><br><span class="line">	List&lt;Employee&gt; emps1 = filterEmployee(list,<span class="keyword">new</span> MyCondition&lt;Employee&gt;() &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">check</span><span class="params">(Employee t)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> t.getAge()&lt;<span class="number">35</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">	System.out.println(<span class="string">"年龄小于35的人："</span>);</span><br><span class="line">	<span class="keyword">for</span> (Employee employee : emps1) &#123;</span><br><span class="line">		System.out.println(employee);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	List&lt;Employee&gt; emps2 = filterEmployee(list,<span class="keyword">new</span> MyCondition&lt;Employee&gt;() &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">check</span><span class="params">(Employee t)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> t.getSalary()&gt;<span class="number">5000</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">	System.out.println(<span class="string">"工资大于5000的人"</span>);</span><br><span class="line">	<span class="keyword">for</span> (Employee employee : emps2) &#123;</span><br><span class="line">		System.out.println(employee);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果同上</p>
<p>demo5:使用Lambda表达式对demo2进行优化</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title">filterEmployee</span><span class="params">(List&lt;Employee&gt; list,MyCondition&lt;Employee&gt; condition)</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	List&lt;Employee&gt; emps = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	<span class="keyword">for</span> (Employee emp : list) &#123;</span><br><span class="line">		<span class="keyword">if</span>(condition.check(emp))&#123;</span><br><span class="line">			emps.add(emp);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> emps;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo5</span><span class="params">()</span></span>&#123;</span><br><span class="line">	List&lt;Employee&gt; emps1 = filterEmployee(list,x -&gt; x.getAge()&lt;<span class="number">35</span>);</span><br><span class="line">	System.out.println(<span class="string">"年龄小于35的人："</span>);</span><br><span class="line">	emps1.forEach(System.out::println);</span><br><span class="line">	</span><br><span class="line">	List&lt;Employee&gt; emps2 = filterEmployee(list,x-&gt;x.getSalary()&gt;<span class="number">5000</span>);</span><br><span class="line">	System.out.println(<span class="string">"工资大于5000的人:"</span>);</span><br><span class="line">	emps2.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Lambda表达式的基本语法"><a href="#Lambda表达式的基本语法" class="headerlink" title="Lambda表达式的基本语法"></a>Lambda表达式的基本语法</h3><p>Java8中引入了一个新的操作符 “-&gt;” 该操作符称为箭头操作符或 Lambda 操作符</p>
<p>箭头操作符将 Lambda 表达式拆分成两部分：</p>
<ul>
<li>左侧：Lambda 表达式的参数列表</li>
<li>右侧：Lambda 表达式中所需执行的功能， 即 Lambda 体</li>
</ul>
<p><strong>语法格式：</strong><br>语法格式一：无参数，无返回值<br><code>() -&gt; System.out.println(&quot;Hello Lambda!&quot;);</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo6</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Runnable r1  = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			System.out.println(<span class="string">"Hello,匿名内部类"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	r1.run();</span><br><span class="line">	Runnable r2 = () -&gt;System.out.println(<span class="string">"Hello,Lambda表达式"</span>);</span><br><span class="line">	r2.run();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hello,匿名内部类</span><br><span class="line">Hello,Lambda表达式</span><br></pre></td></tr></table></figure>

<p>语法格式二：有一个参数，并且无返回值<br><code>(x) -&gt; System.out.println(x)</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo7</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Consumer&lt;String&gt; con = (x)-&gt;System.out.println(x);</span><br><span class="line">	con.accept(<span class="string">"有参无返回值示例"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">有参无返回值示例</span><br></pre></td></tr></table></figure>


<p>语法格式三：若只有一个参数，小括号可以省略不写<br><code>x -&gt; System.out.println(x)</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo8</span><span class="params">()</span></span>&#123;</span><br><span class="line">Consumer&lt;String&gt; con = x-&gt;System.out.println(x);</span><br><span class="line">	con.accept(<span class="string">"有参无返回值示例"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">有参无返回值示例</span><br></pre></td></tr></table></figure>

<p>语法格式四：有两个以上的参数，有返回值，并且 Lambda 体中有多条语句<br><code>Comparator&lt;Integer&gt; com = (x, y) -&gt; {
            System.out.println(&quot;函数式接口&quot;);
            return Integer.compare(x, y);
    };</code></p>
<p>语法格式五：若 Lambda 体中只有一条语句， return 和 大括号都可以省略不写<br><code>Comparator&lt;Integer&gt; com = (x, y) -&gt; Integer.compare(x, y);</code></p>
<p> 语法格式六：Lambda 表达式的参数列表的数据类型可以省略不写，因为JVM编译器通过上下文推断出，数据类型，即“类型推断”<br><code>(Integer x, Integer y) -&gt; Integer.compare(x, y);</code></p>
<p>上述 Lambda 表达式中的参数类型都是由编译器推断得出的。Lambda 表达式中无需指定类型，程序依然可以编译，这是因为 javac 根据程序的上下文，在后台推断出了参数的类型。Lambda 表达式的类型依赖于上下文环境，是由编译器推断出来的。这就是所谓的<strong>“类型推断”</strong></p>
<p>左右遇一括号省<br>左侧推断类型省<br>能省则省</p>
<p>Lambda 表达式需要“函数式接口”的支持<br> 函数式接口：接口中只有一个抽象方法的接口，称为函数式接口。 可以使用注解 @FunctionalInterface 修饰,可以检查是否是函数式接口<br>demo:函数式接口示例</p>
<p>定义接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyFun</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getVal</span><span class="params">(<span class="keyword">int</span> x)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>定义测试方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo8</span><span class="params">()</span></span>&#123;</span><br><span class="line">	MyFun myFun = x-&gt;x*x;</span><br><span class="line">	System.out.println(myFun.getVal(<span class="number">5</span>));</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">25</span><br></pre></td></tr></table></figure>


<h3 id="Java-内置四大核心函数式接口"><a href="#Java-内置四大核心函数式接口" class="headerlink" title="Java 内置四大核心函数式接口"></a>Java 内置四大核心函数式接口</h3><p><img src="http://img.bcoder.top/2017.07.22/1.png" alt="Java8学习"></p>
<p>demo 9:Consumer<T> 消费型接口测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Consumer&lt;T&gt; 消费型接口</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo9</span><span class="params">()</span></span>&#123;</span><br><span class="line">	doSomething(<span class="number">10000</span>, (x)-&gt;&#123;</span><br><span class="line">		System.out.println(<span class="string">"买电脑消费："</span>+x);</span><br><span class="line">	&#125;);</span><br><span class="line">	</span><br><span class="line">	doSomething(<span class="number">2000</span>, (x)-&gt;&#123;</span><br><span class="line">		System.out.println(<span class="string">"买手机消费："</span>+x);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">买电脑消费：10000.0</span><br><span class="line">买手机消费：2000.0</span><br></pre></td></tr></table></figure>


<p>demo 10:Supplier<T> 供给型接口测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Supplier&lt;T&gt; 供给型接口测试</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo10</span><span class="params">()</span></span>&#123;</span><br><span class="line">	List&lt;Integer&gt; numList = getNumList(<span class="number">10</span>, ()-&gt;(<span class="keyword">int</span>)(Math.random()*<span class="number">100</span>));</span><br><span class="line">	System.out.println(numList);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//需求：产生指定个数的整数，并放入集合中</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">getNumList</span><span class="params">(<span class="keyword">int</span> num, Supplier&lt;Integer&gt; sup)</span></span>&#123;</span><br><span class="line">	List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt; num;i++)&#123;</span><br><span class="line">		list.add(sup.get());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> list;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[80, 78, 93, 17, 64, 11, 82, 98, 92, 86]</span><br></pre></td></tr></table></figure>


<p>demo 11:Function&lt;T, R&gt; 函数型接口测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Function&lt;T, R&gt; 函数型接口</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo11</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">//字符串变小写</span></span><br><span class="line">	System.out.println(strHandler(<span class="string">"aSSa"</span>, (str)-&gt;str.toLowerCase()));</span><br><span class="line">	<span class="comment">//截取字符串</span></span><br><span class="line">	System.out.println(strHandler(<span class="string">"aSSa"</span>, (str)-&gt;str.substring(<span class="number">2</span>, <span class="number">3</span>)));</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//需求：用于处理字符串</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">strHandler</span><span class="params">(String str ,Function&lt;String, String&gt; fun)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> fun.apply(str);</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assa</span><br><span class="line">S</span><br></pre></td></tr></table></figure>




<p>demo 12:Predicate<T> 断言型接口测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo12</span><span class="params">()</span></span>&#123;</span><br><span class="line">	List&lt;String&gt; list = Arrays.asList(<span class="string">"Hello"</span>,<span class="string">"aA"</span>, <span class="string">"aAAAA"</span>, <span class="string">"Lambda"</span>, <span class="string">"www"</span>, <span class="string">"ok"</span>);</span><br><span class="line">	List&lt;String&gt; strList = filterStr(list, (s) -&gt; s.length() &gt; <span class="number">3</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> (String str : strList) &#123;</span><br><span class="line">		System.out.println(str);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//需求：将满足条件的字符串，放入集合中</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">filterStr</span><span class="params">(List&lt;String&gt; list, Predicate&lt;String&gt; pre)</span></span>&#123;</span><br><span class="line">	List&lt;String&gt; strList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> (String str : list) &#123;</span><br><span class="line">		<span class="keyword">if</span>(pre.test(str))&#123;</span><br><span class="line">			strList.add(str);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> strList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hello</span><br><span class="line">aAAAA</span><br><span class="line">Lambda</span><br></pre></td></tr></table></figure>


<h4 id="其他接口"><a href="#其他接口" class="headerlink" title="其他接口"></a>其他接口</h4><p><img src="http://img.bcoder.top/2017.07.22/2.png" alt="Java8学习"></p>
<h2 id="方法引用与构造器引用"><a href="#方法引用与构造器引用" class="headerlink" title="方法引用与构造器引用"></a>方法引用与构造器引用</h2><h3 id="方法引用"><a href="#方法引用" class="headerlink" title="方法引用"></a>方法引用</h3><p>当要传递给Lambda体的操作，已经有实现的方法了，可以使用方法引用！（实现抽象方法的参数列表，必须与方法引用方法的参数列表保持一致！）<br>方法引用：使用操作符 “ ::” 将方法名和对象或类的名字分隔开来。</p>
<p>如下三种主要使用情况 ：</p>
<ul>
<li>对象 :: 实例方法</li>
<li>类 :: 静态方法</li>
<li>类 ::实例方法</li>
</ul>
<p><strong>注意：</strong></p>
<ul>
<li>①方法引用所引用的方法的参数列表与返回值类型，需要与函数式接口中抽象方法的参数列表和返回值类型保持一致！</li>
<li>②若Lambda 的参数列表的第一个参数，是实例方法的调用者，第二个参数(或无参)是实例方法的参数时，格 式：ClassName::MethodName</li>
</ul>
<p>我们来看下面几个例子</p>
<p>demo；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo13</span><span class="params">()</span></span>&#123;</span><br><span class="line">	PrintStream ps = System.out;</span><br><span class="line">	Consumer&lt;String&gt; con = (str) -&gt; ps.println(str);</span><br><span class="line">	con.accept(<span class="string">"Hello World！"</span>);</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"--------------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	Consumer&lt;String&gt; con2 = ps::println;</span><br><span class="line">	con2.accept(<span class="string">"Hello Java8！"</span>);</span><br><span class="line">	</span><br><span class="line">	Consumer&lt;String&gt; con3 = System.out::println;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hello World！</span><br><span class="line">--------------------------------</span><br><span class="line">Hello Java8！</span><br></pre></td></tr></table></figure>

<p>demo：对象的引用 :: 实例方法名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo14</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Employee emp = <span class="keyword">new</span> Employee( <span class="string">"张三"</span>, <span class="number">18</span>, <span class="number">9999.99</span>);</span><br><span class="line">	</span><br><span class="line">	Supplier&lt;String&gt; sup = () -&gt; emp.getName();</span><br><span class="line">	System.out.println(sup.get());</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"----------------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	Supplier&lt;String&gt; sup2 = emp::getName;</span><br><span class="line">	System.out.println(sup2.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">张三</span><br><span class="line">----------------------------------</span><br><span class="line">张三</span><br></pre></td></tr></table></figure>


<p>demo：类名 :: 静态方法名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo15</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Comparator&lt;Integer&gt; com = (x, y) -&gt; Integer.compare(x, y);</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"-------------------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	Comparator&lt;Integer&gt; com2 = Integer::compare;</span><br><span class="line">	</span><br><span class="line">	BiFunction&lt;Double, Double, Double&gt; fun = (x, y) -&gt; Math.max(x, y);</span><br><span class="line">	System.out.println(fun.apply(<span class="number">1.5</span>, <span class="number">22.2</span>));</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"-------------------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	BiFunction&lt;Double, Double, Double&gt; fun2 = Math::max;</span><br><span class="line">	System.out.println(fun2.apply(<span class="number">1.2</span>, <span class="number">1.5</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------------</span><br><span class="line">22.2</span><br><span class="line">-------------------------------------</span><br><span class="line">1.5</span><br></pre></td></tr></table></figure>



<p>demo：类名 :: 实例方法名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo16</span><span class="params">()</span></span>&#123;</span><br><span class="line">	BiPredicate&lt;String, String&gt; bp = (x, y) -&gt; x.equals(y);</span><br><span class="line">	System.out.println(bp.test(<span class="string">"abcde"</span>, <span class="string">"abcde"</span>));</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"-----------------------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	BiPredicate&lt;String, String&gt; bp2 = String::equals;</span><br><span class="line">	System.out.println(bp2.test(<span class="string">"abc"</span>, <span class="string">"abc"</span>));</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"-----------------------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	Function&lt;Employee, String&gt; fun = (e) -&gt; e.show();</span><br><span class="line">	System.out.println(fun.apply(<span class="keyword">new</span> Employee()));</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"-----------------------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	Function&lt;Employee, String&gt; fun2 = Employee::show;</span><br><span class="line">	System.out.println(fun2.apply(<span class="keyword">new</span> Employee()));</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">true</span><br><span class="line">-----------------------------------------</span><br><span class="line">true</span><br><span class="line">-----------------------------------------</span><br><span class="line">测试方法引用！</span><br><span class="line">-----------------------------------------</span><br><span class="line">测试方法引用！</span><br></pre></td></tr></table></figure>

<h3 id="构造器引用"><a href="#构造器引用" class="headerlink" title="构造器引用"></a>构造器引用</h3><p><strong>格式： ClassName :: new</strong><br>与函数式接口相结合，自动与函数式接口中方法兼容。可以把构造器引用赋值给定义的方法，与构造器参数列表要与接口中抽象方法的参数列表一致！</p>
<p>demo：构造器引用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo17</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Supplier&lt;Employee&gt; sup = () -&gt; <span class="keyword">new</span> Employee();</span><br><span class="line">	System.out.println(sup.get());</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"------------------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	Supplier&lt;Employee&gt; sup2 = Employee::<span class="keyword">new</span>;</span><br><span class="line">	System.out.println(sup2.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Employee [name&#x3D;null, age&#x3D;0, salary&#x3D;0.0]</span><br><span class="line">------------------------------------</span><br><span class="line">Employee [name&#x3D;null, age&#x3D;0, salary&#x3D;0.0]</span><br></pre></td></tr></table></figure>

<h3 id="数组引用"><a href="#数组引用" class="headerlink" title="数组引用"></a>数组引用</h3><p><strong>格式： type[] :: new</strong></p>
<p>demo：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo18</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Function&lt;Integer, String[]&gt; fun = (args) -&gt; <span class="keyword">new</span> String[args];</span><br><span class="line">	String[] strs = fun.apply(<span class="number">10</span>);</span><br><span class="line">	System.out.println(strs.length);</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"--------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	Function&lt;Integer, Employee[]&gt; fun2 = Employee[] :: <span class="keyword">new</span>;</span><br><span class="line">	Employee[] emps = fun2.apply(<span class="number">20</span>);</span><br><span class="line">	System.out.println(emps.length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">--------------------------</span><br><span class="line">20</span><br></pre></td></tr></table></figure>


<h2 id="Stream-API"><a href="#Stream-API" class="headerlink" title="Stream API"></a>Stream API</h2><h3 id="什么是-Stream"><a href="#什么是-Stream" class="headerlink" title="什么是 Stream"></a>什么是 Stream</h3><p>Java8中有两大最为重要的改变。第一个是 Lambda 表达式；另外一个则是 Stream API( java.util.stream .*) 。</p>
<p>Stream 是 Java8 中处理集合的关键抽象概念，它可以指定你希望对集合进行的操作，可以执行非常复杂的查找、过滤和映射数据等操作。</p>
<p>使用Stream API 对集合数据进行操作，就类似于使用 SQL 执行的数据库查询。也可以使用 Stream API 来并行执行操作。简而言之，</p>
<p>Stream API 提供了一种高效且易于使用的处理数据的方式。</p>
<p><strong>流 (Stream)  到底是什么呢 ？</strong><br>是数据渠道，用于操作数据源（集合、数组等）所生成的元素序列。<br>“集合讲的是数据，流讲的是计算！ ”</p>
<p>注意：<br>①Stream 自己不会存储元素。<br>②Stream 不会改变源对象。相反，他们会返回一个持有结果的新Stream。<br>③Stream 操作是延迟执行的。这意味着他们会等到需要结果的时候才执行。</p>
<h3 id="Stream-的操作三个步骤"><a href="#Stream-的操作三个步骤" class="headerlink" title="Stream  的操作三个步骤"></a>Stream  的操作三个步骤</h3><p><strong>1.创建  Stream</strong><br>一个数据源（如：集合、数组），获取一个流</p>
<p><strong>2.中间操作</strong><br>一个中间操作链，对数据源的数据进行处理</p>
<p><strong>3.终止操作( ( 终端操作) )</strong><br>一个终止操作，执行中间操作链，并产生结果</p>
<p><img src="http://img.bcoder.top/2017.07.22/3.png" alt="Java8学习"></p>
<h3 id="创建-Stream"><a href="#创建-Stream" class="headerlink" title="创建 Stream"></a>创建 Stream</h3><p>Java8 中的 Collection 接口被扩展，提供了<br>两个获取流的方法 ：</p>
<ul>
<li><code>default Stream&lt;E&gt; stream()</code>: 返回一个顺序流</li>
<li><code>default Stream&lt;E&gt; parallelStream()</code>: 返回一个并行流</li>
</ul>
<h4 id="由数组创建流"><a href="#由数组创建流" class="headerlink" title="由数组创建流"></a>由数组创建流</h4><p>Java8 中的 Arrays 的静态方法 stream() 可以获取数组流：<br><code>static &lt;T&gt; Stream&lt;T&gt; stream(T[] array)</code>: 返回一个流</p>
<p>重载形式，能够处理对应基本类型的数组：</p>
<ul>
<li><code>public static IntStream stream(int[] array)</code></li>
<li><code>public static LongStream stream(long[] array)</code></li>
<li><code>public static DoubleStream stream(double[] array)</code></li>
</ul>
<h4 id="由值创建流"><a href="#由值创建流" class="headerlink" title="由值创建流"></a>由值创建流</h4><p>可以使用静态方法 Stream.of(), 通过显示值<br>创建一个流。它可以接收任意数量的参数。<br><code>public static&lt;T&gt; Stream&lt;T&gt; of(T... values)</code>: 返回一个流</p>
<h4 id="由函数创建流：创建无限流"><a href="#由函数创建流：创建无限流" class="headerlink" title="由函数创建流：创建无限流"></a>由函数创建流：创建无限流</h4><p>可以使用静态方法 Stream.iterate() 和<br>Stream.generate(), 创建无限流。</p>
<blockquote>
<p><strong>迭代</strong></p>
</blockquote>
<p><code>public static&lt;T&gt; Stream&lt;T&gt; iterate(final T seed, final UnaryOperator&lt;T&gt; f)</code></p>
<blockquote>
<p><strong>生成</strong></p>
</blockquote>
<p><code>public static&lt;T&gt; Stream&lt;T&gt; generate(Supplier&lt;T&gt; s) :</code></p>
<p>demo：创建 Stream</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo19</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">//1. Collection 提供了两个方法  stream() 与 parallelStream()</span></span><br><span class="line">	List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	Stream&lt;String&gt; stream = list.stream(); <span class="comment">//获取一个顺序流</span></span><br><span class="line">	Stream&lt;String&gt; parallelStream = list.parallelStream(); <span class="comment">//获取一个并行流</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//2. 通过 Arrays 中的 stream() 获取一个数组流</span></span><br><span class="line">	Integer[] nums = <span class="keyword">new</span> Integer[<span class="number">10</span>];</span><br><span class="line">	Stream&lt;Integer&gt; stream1 = Arrays.stream(nums);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//3. 通过 Stream 类中静态方法 of()</span></span><br><span class="line">	Stream&lt;Integer&gt; stream2 = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//4. 创建无限流</span></span><br><span class="line">	<span class="comment">//迭代</span></span><br><span class="line">	Stream&lt;Integer&gt; stream3 = Stream.iterate(<span class="number">0</span>, (x) -&gt; x + <span class="number">2</span>).limit(<span class="number">10</span>);</span><br><span class="line">	stream3.forEach(System.out::println);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//生成</span></span><br><span class="line">	Stream&lt;Double&gt; stream4 = Stream.generate(Math::random).limit(<span class="number">2</span>);</span><br><span class="line">	stream4.forEach(System.out::println);</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Stream中间操作"><a href="#Stream中间操作" class="headerlink" title="Stream中间操作"></a>Stream中间操作</h3><p>多个中间操作可以连接起来形成一个流水线，除非流水线上触发终止操作，否则中间操作不会执行任何的处理！而在终止操作时一次性全部 处理，称为“惰性求值”。</p>
<blockquote>
<p><strong>筛选与切片</strong></p>
</blockquote>
<p><img src="http://img.bcoder.top/2017.07.22/4.png" alt="Java8学习"></p>
<p>demo：filter——接收 Lambda ， 从流中排除某些元素。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Employee&gt; emps = Arrays.asList(</span><br><span class="line">	<span class="keyword">new</span> Employee(<span class="string">"李四"</span>, <span class="number">59</span>, <span class="number">6666.66</span>),</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"张三"</span>, <span class="number">18</span>, <span class="number">9999.99</span>),</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"王五"</span>, <span class="number">28</span>, <span class="number">3333.33</span>),</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"赵六"</span>, <span class="number">8</span>, <span class="number">7777.77</span>),</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"赵六"</span>, <span class="number">8</span>, <span class="number">7777.77</span>),</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"赵六"</span>, <span class="number">8</span>, <span class="number">7777.77</span>),</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"田七"</span>, <span class="number">38</span>, <span class="number">5555.55</span>)</span><br><span class="line">);</span><br><span class="line">	</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo20</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">//所有的中间操作不会做任何的处理</span></span><br><span class="line">	Stream&lt;Employee&gt; stream = emps.stream()</span><br><span class="line">		.filter((e) -&gt; &#123;</span><br><span class="line">			System.out.println(<span class="string">"测试中间操作"</span>);</span><br><span class="line">			<span class="keyword">return</span> e.getAge() &lt;= <span class="number">35</span>;</span><br><span class="line">		&#125;);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//只有当做终止操作时，所有的中间操作会一次性的全部执行，称为“惰性求值”</span></span><br><span class="line">		stream.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">测试中间操作</span><br><span class="line">测试中间操作</span><br><span class="line">Employee [name&#x3D;张三, age&#x3D;18, salary&#x3D;9999.99]</span><br><span class="line">测试中间操作</span><br><span class="line">Employee [name&#x3D;王五, age&#x3D;28, salary&#x3D;3333.33]</span><br><span class="line">测试中间操作</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">测试中间操作</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">测试中间操作</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">测试中间操作</span><br></pre></td></tr></table></figure>



<p>demo：limit——截断流，使其元素不超过给定数量。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo21</span><span class="params">()</span></span>&#123;</span><br><span class="line">	emps.stream()</span><br><span class="line">	.filter((e) -&gt; &#123;</span><br><span class="line">		System.out.println(<span class="string">"短路！"</span>); <span class="comment">// &amp;&amp;  ||</span></span><br><span class="line">		<span class="keyword">return</span> e.getSalary() &gt;= <span class="number">5000</span>;</span><br><span class="line">	&#125;).limit(<span class="number">3</span>)</span><br><span class="line">	.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">短路！</span><br><span class="line">Employee [name&#x3D;李四, age&#x3D;59, salary&#x3D;6666.66]</span><br><span class="line">短路！</span><br><span class="line">Employee [name&#x3D;张三, age&#x3D;18, salary&#x3D;9999.99]</span><br></pre></td></tr></table></figure>

<p>demo:skip(n) —— 跳过元素，返回一个扔掉了前 n 个元素的流。若流中元素不足 n 个，则返回一个空流。与 limit(n) 互补</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo22</span><span class="params">()</span></span>&#123;</span><br><span class="line">	emps.parallelStream()</span><br><span class="line">		.filter((e) -&gt; e.getSalary() &gt;= <span class="number">5000</span>)</span><br><span class="line">		.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">	System.out.println(<span class="string">"==========="</span>); </span><br><span class="line">	emps.parallelStream()</span><br><span class="line">		.filter((e) -&gt; e.getSalary() &gt;= <span class="number">5000</span>)</span><br><span class="line">		.skip(<span class="number">2</span>)</span><br><span class="line">		.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">Employee [name&#x3D;田七, age&#x3D;38, salary&#x3D;5555.55]</span><br><span class="line">Employee [name&#x3D;张三, age&#x3D;18, salary&#x3D;9999.99]</span><br><span class="line">Employee [name&#x3D;李四, age&#x3D;59, salary&#x3D;6666.66]</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">Employee [name&#x3D;李四, age&#x3D;59, salary&#x3D;6666.66]</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br></pre></td></tr></table></figure>


<p>demo:distinct——筛选，通过流所生成元素的 hashCode() 和 equals() 去除重复元素</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2. 中间操作</span></span><br><span class="line">List&lt;Employee&gt; emps = Arrays.asList(</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"李四"</span>, <span class="number">59</span>, <span class="number">6666.66</span>),</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"张三"</span>, <span class="number">18</span>, <span class="number">9999.99</span>),</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"王五"</span>, <span class="number">28</span>, <span class="number">3333.33</span>),</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"赵六"</span>, <span class="number">8</span>, <span class="number">7777.77</span>),</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"赵六"</span>, <span class="number">8</span>, <span class="number">7777.77</span>),</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"赵六"</span>, <span class="number">8</span>, <span class="number">7777.77</span>),</span><br><span class="line">		<span class="keyword">new</span> Employee(<span class="string">"田七"</span>, <span class="number">38</span>, <span class="number">5555.55</span>)</span><br><span class="line">);</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo23</span><span class="params">()</span></span>&#123;</span><br><span class="line">	emps.stream()</span><br><span class="line">		.forEach(System.out::println);</span><br><span class="line">	System.out.println(<span class="string">"==================去重后=================="</span>);</span><br><span class="line">	emps.stream()</span><br><span class="line">		.distinct()</span><br><span class="line">		.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对去重的对象进行重写hashcode和equals方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">final</span> <span class="keyword">int</span> prime = <span class="number">31</span>;</span><br><span class="line">	<span class="keyword">int</span> result = <span class="number">1</span>;</span><br><span class="line">	result = prime * result + age;</span><br><span class="line">	result = prime * result + ((name == <span class="keyword">null</span>) ? <span class="number">0</span> : name.hashCode());</span><br><span class="line">	<span class="keyword">long</span> temp;</span><br><span class="line">	temp = Double.doubleToLongBits(salary);</span><br><span class="line">	result = prime * result + (<span class="keyword">int</span>) (temp ^ (temp &gt;&gt;&gt; <span class="number">32</span>));</span><br><span class="line">	<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span> == obj)</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	<span class="keyword">if</span> (obj == <span class="keyword">null</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	<span class="keyword">if</span> (getClass() != obj.getClass())</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	Employee other = (Employee) obj;</span><br><span class="line">	<span class="keyword">if</span> (age != other.age)</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	<span class="keyword">if</span> (name == <span class="keyword">null</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (other.name != <span class="keyword">null</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!name.equals(other.name))</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	<span class="keyword">if</span> (Double.doubleToLongBits(salary) != Double.doubleToLongBits(other.salary))</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Employee [name&#x3D;李四, age&#x3D;59, salary&#x3D;6666.66]</span><br><span class="line">Employee [name&#x3D;张三, age&#x3D;18, salary&#x3D;9999.99]</span><br><span class="line">Employee [name&#x3D;王五, age&#x3D;28, salary&#x3D;3333.33]</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">Employee [name&#x3D;田七, age&#x3D;38, salary&#x3D;5555.55]</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;去重后&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">Employee [name&#x3D;李四, age&#x3D;59, salary&#x3D;6666.66]</span><br><span class="line">Employee [name&#x3D;张三, age&#x3D;18, salary&#x3D;9999.99]</span><br><span class="line">Employee [name&#x3D;王五, age&#x3D;28, salary&#x3D;3333.33]</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">Employee [name&#x3D;田七, age&#x3D;38, salary&#x3D;5555.55]</span><br></pre></td></tr></table></figure>


<blockquote>
<p><strong>映射</strong></p>
</blockquote>
<p>map——接收 Lambda ， 将元素转换成其他形式或提取信息。接收一个函数作为参数，该函数会被应用到每个元素上，并将其映射成一个新的元素。</p>
<p>flatMap——接收一个函数作为参数，将流中的每个值都换成另一个流，然后把所有流连接成一个流</p>
<p><img src="http://img.bcoder.top/2017.07.22/5.png" alt="Java8学习"></p>
<p>demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo24</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Stream&lt;String&gt; str = emps.stream()</span><br><span class="line">							 .map((e) -&gt; e.getName());</span><br><span class="line">	str.forEach(System.out::println);;</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"-------------------------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	List&lt;String&gt; strList = Arrays.asList(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"cc"</span>, <span class="string">"d"</span>, <span class="string">"ee"</span>);</span><br><span class="line">	</span><br><span class="line">	Stream&lt;String&gt; stream = strList.stream()</span><br><span class="line">		   .map(String::toUpperCase);</span><br><span class="line">	</span><br><span class="line">	stream.forEach(System.out::println);</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"-------------------------------------------"</span>);</span><br><span class="line">	Stream&lt;Stream&lt;Character&gt;&gt; stream2 = strList.stream()</span><br><span class="line">		   .map(TestStream::filterCharacter);</span><br><span class="line">	</span><br><span class="line">	stream2.forEach((sm) -&gt; &#123;</span><br><span class="line">		sm.forEach(System.out::println);</span><br><span class="line">	&#125;);</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"---------------------------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	Stream&lt;Character&gt; stream3 = strList.stream()</span><br><span class="line">		   .flatMap(TestStream::filterCharacter);</span><br><span class="line">	</span><br><span class="line">	stream3.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Stream&lt;Character&gt; <span class="title">filterCharacter</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line">	List&lt;Character&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> (Character ch : str.toCharArray()) &#123;</span><br><span class="line">		list.add(ch);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> list.stream();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">李四</span><br><span class="line">张三</span><br><span class="line">王五</span><br><span class="line">赵六</span><br><span class="line">赵六</span><br><span class="line">赵六</span><br><span class="line">田七</span><br><span class="line">-------------------------------------------</span><br><span class="line">A</span><br><span class="line">B</span><br><span class="line">CC</span><br><span class="line">D</span><br><span class="line">EE</span><br><span class="line">-------------------------------------------</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">e</span><br><span class="line">e</span><br><span class="line">---------------------------------------------</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">e</span><br><span class="line">e</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>排序</strong></p>
</blockquote>
<p><img src="http://img.bcoder.top/2017.07.22/6.png" alt="Java8学习"></p>
<p>demo：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo25</span><span class="params">()</span></span>&#123;</span><br><span class="line">	emps.stream()</span><br><span class="line">		.map(Employee::getName)</span><br><span class="line">		.sorted()</span><br><span class="line">		.forEach(System.out::println);</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"------------------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	emps.stream()</span><br><span class="line">		.sorted((x, y) -&gt; &#123;</span><br><span class="line">			<span class="keyword">if</span>(x.getAge() == y.getAge())&#123;</span><br><span class="line">				<span class="keyword">return</span> x.getName().compareTo(y.getName());</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="keyword">return</span> Integer.compare(x.getAge(), y.getAge());</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;).forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">张三</span><br><span class="line">李四</span><br><span class="line">王五</span><br><span class="line">田七</span><br><span class="line">赵六</span><br><span class="line">赵六</span><br><span class="line">赵六</span><br><span class="line">------------------------------------</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77]</span><br><span class="line">Employee [name&#x3D;张三, age&#x3D;18, salary&#x3D;9999.99]</span><br><span class="line">Employee [name&#x3D;王五, age&#x3D;28, salary&#x3D;3333.33]</span><br><span class="line">Employee [name&#x3D;田七, age&#x3D;38, salary&#x3D;5555.55]</span><br><span class="line">Employee [name&#x3D;李四, age&#x3D;59, salary&#x3D;6666.66]</span><br></pre></td></tr></table></figure>

<h3 id="Stream-的终止操作"><a href="#Stream-的终止操作" class="headerlink" title="Stream  的终止操作"></a>Stream  的终止操作</h3><p>终端操作会从流的流水线生成结果。其结果可以是任何不是流的值，例如：List、Integer，甚至是 void</p>
<blockquote>
<p><strong>查找与匹配</strong></p>
</blockquote>
<p><img src="http://img.bcoder.top/2017.07.22/7.png" alt="Java8学习"></p>
<p><img src="http://img.bcoder.top/2017.07.22/8.png" alt="Java8学习"></p>
<p>修改Employee类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.bcoder.java8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> salary;</span><br><span class="line">	<span class="keyword">private</span> Status status;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">enum</span> Status &#123;</span><br><span class="line">		FREE, BUSY, VOCATION;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Status <span class="title">getStatus</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> status;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStatus</span><span class="params">(Status status)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.status = status;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String name, <span class="keyword">int</span> age, <span class="keyword">double</span> salary, Status status)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">		<span class="keyword">this</span>.salary = salary;</span><br><span class="line">		<span class="keyword">this</span>.status = status;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">( String name, <span class="keyword">int</span> age, <span class="keyword">double</span> salary)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">		<span class="keyword">this</span>.salary = salary;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSalary</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> salary;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSalary</span><span class="params">(<span class="keyword">double</span> salary)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.salary = salary;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"测试方法引用！"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Employee [name="</span> + name + <span class="string">", age="</span> + age + <span class="string">", salary="</span> + salary + <span class="string">", status="</span> + status + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">final</span> <span class="keyword">int</span> prime = <span class="number">31</span>;</span><br><span class="line">		<span class="keyword">int</span> result = <span class="number">1</span>;</span><br><span class="line">		result = prime * result + age;</span><br><span class="line">		result = prime * result + ((name == <span class="keyword">null</span>) ? <span class="number">0</span> : name.hashCode());</span><br><span class="line">		<span class="keyword">long</span> temp;</span><br><span class="line">		temp = Double.doubleToLongBits(salary);</span><br><span class="line">		result = prime * result + (<span class="keyword">int</span>) (temp ^ (temp &gt;&gt;&gt; <span class="number">32</span>));</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == obj)</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		<span class="keyword">if</span> (obj == <span class="keyword">null</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		<span class="keyword">if</span> (getClass() != obj.getClass())</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		Employee other = (Employee) obj;</span><br><span class="line">		<span class="keyword">if</span> (age != other.age)</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		<span class="keyword">if</span> (name == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (other.name != <span class="keyword">null</span>)</span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!name.equals(other.name))</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		<span class="keyword">if</span> (Double.doubleToLongBits(salary) != Double.doubleToLongBits(other.salary))</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>allMatch——检查是否匹配所有元素<br>anyMatch——检查是否至少匹配一个元素<br>noneMatch——检查是否没有匹配的元素<br>demo：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Employee&gt; list = Arrays.asList(</span><br><span class="line">	<span class="keyword">new</span> Employee(<span class="string">"李四"</span>, <span class="number">79</span>, <span class="number">6666.66</span>, Status.BUSY),</span><br><span class="line">	<span class="keyword">new</span> Employee(<span class="string">"张三"</span>, <span class="number">18</span>, <span class="number">9999.99</span>, Status.FREE),</span><br><span class="line">	<span class="keyword">new</span> Employee(<span class="string">"王五"</span>, <span class="number">28</span>, <span class="number">3333.33</span>, Status.VOCATION),</span><br><span class="line">	<span class="keyword">new</span> Employee(<span class="string">"赵六"</span>, <span class="number">8</span>, <span class="number">7777.77</span>, Status.BUSY), </span><br><span class="line">	<span class="keyword">new</span> Employee(<span class="string">"赵六"</span>, <span class="number">8</span>, <span class="number">7777.77</span>, Status.FREE),</span><br><span class="line">	<span class="keyword">new</span> Employee(<span class="string">"赵六"</span>, <span class="number">8</span>, <span class="number">7777.77</span>, Status.FREE), </span><br><span class="line">	<span class="keyword">new</span> Employee(<span class="string">"田七"</span>, <span class="number">38</span>, <span class="number">5555.55</span>, Status.BUSY));</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo26</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">boolean</span> b1 = list.stream()</span><br><span class="line">					 .allMatch((e) -&gt; e.getStatus().equals(Status.BUSY));</span><br><span class="line">	System.out.println(b1);</span><br><span class="line">	<span class="keyword">boolean</span> b2 = list.stream()</span><br><span class="line">				    .anyMatch((e) -&gt; e.getStatus().equals(Status.BUSY));</span><br><span class="line">	System.out.println(b2);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">boolean</span> b3 = list.stream()</span><br><span class="line">					 .noneMatch((e) -&gt; e.getStatus().equals(Status.BUSY));</span><br><span class="line">	System.out.println(b3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">false</span><br><span class="line">true</span><br><span class="line">false</span><br></pre></td></tr></table></figure>

<p>findFirst——返回第一个元素<br>findAny——返回当前流中的任意元素<br>demo：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo27</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Optional&lt;Employee&gt; op = list.stream()</span><br><span class="line">		.sorted((e1, e2) -&gt; Double.compare(e1.getSalary(), e2.getSalary()))</span><br><span class="line">		.findFirst();</span><br><span class="line">	</span><br><span class="line">	System.out.println(op.get());</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"--------------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	Optional&lt;Employee&gt; op2 = list.parallelStream()</span><br><span class="line">		.filter((e) -&gt; e.getStatus().equals(Status.FREE))</span><br><span class="line">		.findAny();</span><br><span class="line">	</span><br><span class="line">	System.out.println(op2.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Employee [name&#x3D;王五, age&#x3D;28, salary&#x3D;3333.33, status&#x3D;VOCATION]</span><br><span class="line">--------------------------------</span><br><span class="line">Employee [name&#x3D;张三, age&#x3D;18, salary&#x3D;9999.99, status&#x3D;FREE]</span><br></pre></td></tr></table></figure>


<p>count——返回流中元素的总个数<br>max——返回流中最大值<br>min——返回流中最小值<br>demo：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo28</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">long</span> count = list.stream()</span><br><span class="line">					 .filter((e) -&gt; e.getStatus().equals(Status.FREE))</span><br><span class="line">					 .count();</span><br><span class="line">	</span><br><span class="line">	System.out.println(count);</span><br><span class="line">	</span><br><span class="line">	Optional&lt;Double&gt; op = list.stream()</span><br><span class="line">		.map(Employee::getSalary)</span><br><span class="line">		.max(Double::compare);</span><br><span class="line">	</span><br><span class="line">	System.out.println(op.get());</span><br><span class="line">	</span><br><span class="line">	Optional&lt;Employee&gt; op2 = list.stream()</span><br><span class="line">		.min((e1, e2) -&gt; Double.compare(e1.getSalary(), e2.getSalary()));</span><br><span class="line">	</span><br><span class="line">	System.out.println(op2.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">9999.99</span><br><span class="line">Employee [name&#x3D;王五, age&#x3D;28, salary&#x3D;3333.33, status&#x3D;VOCATION]</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>归约</strong></p>
</blockquote>
<p><img src="http://img.bcoder.top/2017.07.22/9.png" alt="Java8学习"></p>
<p>备注：map 和 reduce 的连接通常称为 map-reduce 模式，因 Google 用它来进行网络搜索而出名。</p>
<p>demo：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo29</span><span class="params">()</span></span>&#123;</span><br><span class="line">	List&lt;Integer&gt; list = Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>);</span><br><span class="line">	</span><br><span class="line">	Integer sum = list.stream()</span><br><span class="line">		.reduce(<span class="number">0</span>, (x, y) -&gt; x + y);</span><br><span class="line">	</span><br><span class="line">	System.out.println(sum);</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"----------------------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	Optional&lt;Double&gt; op = emps.stream()</span><br><span class="line">		.map(Employee::getSalary)</span><br><span class="line">		.reduce(Double::sum);</span><br><span class="line">	</span><br><span class="line">	System.out.println(op.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">55</span><br><span class="line">----------------------------------------</span><br><span class="line">48888.84000000001</span><br></pre></td></tr></table></figure>

<p>demo：需求：搜索名字中 “六” 出现的次数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Stream&lt;Character&gt; <span class="title">filterCharacter</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">	List&lt;Character&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (Character ch : str.toCharArray()) &#123;</span><br><span class="line">		list.add(ch);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> list.stream();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo30</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Optional&lt;Integer&gt; sum = emps.stream()</span><br><span class="line">		.map(Employee::getName)</span><br><span class="line">		.flatMap(TestStream::filterCharacter)</span><br><span class="line">		.map((ch) -&gt; &#123;</span><br><span class="line">			<span class="keyword">if</span>(ch.equals(<span class="string">'六'</span>))</span><br><span class="line">				<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">else</span> </span><br><span class="line">				<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;).reduce(Integer::sum);</span><br><span class="line">	</span><br><span class="line">	System.out.println(sum.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure>


<blockquote>
<p><strong>收集</strong></p>
</blockquote>
<p><img src="http://img.bcoder.top/2017.07.22/10.png" alt="Java8学习"></p>
<p>Collector 接口中方法的实现决定了如何对流执行收集操作(如收集到 List、Set、Map)。但是 Collectors 实用类提供了很多静态方法，可以方便地创建常见收集器实例，具体方法与实例如下表：</p>
<p><img src="http://img.bcoder.top/2017.07.22/11.png" alt="Java8学习"></p>
<p><img src="http://img.bcoder.top/2017.07.22/12.png" alt="Java8学习"></p>
<p>demo：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo31</span><span class="params">()</span></span>&#123;</span><br><span class="line">	List&lt;String&gt; list1 = list.stream()</span><br><span class="line">		.map(Employee::getName)</span><br><span class="line">		.collect(Collectors.toList());</span><br><span class="line">	</span><br><span class="line">	list1.forEach(System.out::println);</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"----------------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	Set&lt;String&gt; set = list.stream()</span><br><span class="line">		.map(Employee::getName)</span><br><span class="line">		.collect(Collectors.toSet());</span><br><span class="line">	</span><br><span class="line">	set.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">	System.out.println(<span class="string">"----------------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	HashSet&lt;String&gt; hs = list.stream()</span><br><span class="line">		.map(Employee::getName)</span><br><span class="line">		.collect(Collectors.toCollection(HashSet::<span class="keyword">new</span>));</span><br><span class="line">	</span><br><span class="line">	hs.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">李四</span><br><span class="line">张三</span><br><span class="line">王五</span><br><span class="line">赵六</span><br><span class="line">赵六</span><br><span class="line">赵六</span><br><span class="line">田七</span><br><span class="line">----------------------------------</span><br><span class="line">李四</span><br><span class="line">张三</span><br><span class="line">王五</span><br><span class="line">赵六</span><br><span class="line">田七</span><br><span class="line">----------------------------------</span><br><span class="line">李四</span><br><span class="line">张三</span><br><span class="line">王五</span><br><span class="line">赵六</span><br><span class="line">田七</span><br></pre></td></tr></table></figure>





<p>demo：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo32</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//工资的最大值</span></span><br><span class="line">	Optional&lt;Double&gt; max = list.stream()</span><br><span class="line">		.map(Employee::getSalary)</span><br><span class="line">		.collect(Collectors.maxBy(Double::compare));</span><br><span class="line">	</span><br><span class="line">	System.out.println(max.get());</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//工资的最小值的员工</span></span><br><span class="line">	Optional&lt;Employee&gt; op = list.stream()</span><br><span class="line">		.collect(Collectors.minBy((e1, e2) -&gt; Double.compare(e1.getSalary(), e2.getSalary())));</span><br><span class="line">	</span><br><span class="line">	System.out.println(op.get());</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//工资的总和</span></span><br><span class="line">	Double sum = list.stream()</span><br><span class="line">		.collect(Collectors.summingDouble(Employee::getSalary));</span><br><span class="line">	</span><br><span class="line">	System.out.println(sum);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//工资的总和</span></span><br><span class="line">	Double avg = list.stream()</span><br><span class="line">		.collect(Collectors.averagingDouble(Employee::getSalary));</span><br><span class="line">	</span><br><span class="line">	System.out.println(avg);</span><br><span class="line">	<span class="comment">//工资的员工人数</span></span><br><span class="line">	Long count = list.stream()</span><br><span class="line">		.collect(Collectors.counting());</span><br><span class="line">	</span><br><span class="line">	System.out.println(count);</span><br><span class="line">	</span><br><span class="line">	System.out.println(<span class="string">"--------------------------------------------"</span>);</span><br><span class="line">	</span><br><span class="line">	DoubleSummaryStatistics dss = list.stream()</span><br><span class="line">		.collect(Collectors.summarizingDouble(Employee::getSalary));</span><br><span class="line">	</span><br><span class="line">	System.out.println(dss.getMax());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">9999.99</span><br><span class="line">Employee [name&#x3D;王五, age&#x3D;28, salary&#x3D;3333.33, status&#x3D;VOCATION]</span><br><span class="line">48888.840000000004</span><br><span class="line">6984.120000000001</span><br><span class="line">7</span><br><span class="line">--------------------------------------------</span><br><span class="line">9999.99</span><br></pre></td></tr></table></figure>



<p>demo：分组</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo33</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Map&lt;Status, List&lt;Employee&gt;&gt; map = list.stream()</span><br><span class="line">		.collect(Collectors.groupingBy(Employee::getStatus));</span><br><span class="line">	</span><br><span class="line">	System.out.println(map);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;BUSY&#x3D;[Employee [name&#x3D;李四, age&#x3D;79, salary&#x3D;6666.66, status&#x3D;BUSY], Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77, status&#x3D;BUSY], Employee [name&#x3D;田七, age&#x3D;38, salary&#x3D;5555.55, status&#x3D;BUSY]], FREE&#x3D;[Employee [name&#x3D;张三, age&#x3D;18, salary&#x3D;9999.99, status&#x3D;FREE], Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77, status&#x3D;FREE], Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77, status&#x3D;FREE]], VOCATION&#x3D;[Employee [name&#x3D;王五, age&#x3D;28, salary&#x3D;3333.33, status&#x3D;VOCATION]]&#125;</span><br></pre></td></tr></table></figure>



<p>demo：多级分组</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo34</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Map&lt;Status, Map&lt;String, List&lt;Employee&gt;&gt;&gt; map = list.stream()</span><br><span class="line">		.collect(Collectors.groupingBy(Employee::getStatus, Collectors.groupingBy((e) -&gt; &#123;</span><br><span class="line">			<span class="keyword">if</span>(e.getAge() &gt;= <span class="number">60</span>)</span><br><span class="line">				<span class="keyword">return</span> <span class="string">"老年"</span>;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span>(e.getAge() &gt;= <span class="number">35</span>)</span><br><span class="line">				<span class="keyword">return</span> <span class="string">"中年"</span>;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				<span class="keyword">return</span> <span class="string">"成年"</span>;</span><br><span class="line">		&#125;)));</span><br><span class="line">	</span><br><span class="line">	System.out.println(map);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;BUSY&#x3D;&#123;成年&#x3D;[Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77, status&#x3D;BUSY]], 老年&#x3D;[Employee [name&#x3D;李四, age&#x3D;79, salary&#x3D;6666.66, status&#x3D;BUSY]], 中年&#x3D;[Employee [name&#x3D;田七, age&#x3D;38, salary&#x3D;5555.55, status&#x3D;BUSY]]&#125;, FREE&#x3D;&#123;成年&#x3D;[Employee [name&#x3D;张三, age&#x3D;18, salary&#x3D;9999.99, status&#x3D;FREE], Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77, status&#x3D;FREE], Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77, status&#x3D;FREE]]&#125;, VOCATION&#x3D;&#123;成年&#x3D;[Employee [name&#x3D;王五, age&#x3D;28, salary&#x3D;3333.33, status&#x3D;VOCATION]]&#125;&#125;</span><br></pre></td></tr></table></figure>


<p>demo：分区</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo35</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Map&lt;Boolean, List&lt;Employee&gt;&gt; map = list.stream()</span><br><span class="line">		.collect(Collectors.partitioningBy((e) -&gt; e.getSalary() &gt;= <span class="number">5000</span>));</span><br><span class="line">	</span><br><span class="line">	System.out.println(map);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;false&#x3D;[Employee [name&#x3D;王五, age&#x3D;28, salary&#x3D;3333.33, status&#x3D;VOCATION]], true&#x3D;[Employee [name&#x3D;李四, age&#x3D;79, salary&#x3D;6666.66, status&#x3D;BUSY], Employee [name&#x3D;张三, age&#x3D;18, salary&#x3D;9999.99, status&#x3D;FREE], Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77, status&#x3D;BUSY], Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77, status&#x3D;FREE], Employee [name&#x3D;赵六, age&#x3D;8, salary&#x3D;7777.77, status&#x3D;FREE], Employee [name&#x3D;田七, age&#x3D;38, salary&#x3D;5555.55, status&#x3D;BUSY]]&#125;</span><br></pre></td></tr></table></figure>


<h2 id="并行流与串行流"><a href="#并行流与串行流" class="headerlink" title="并行流与串行流"></a>并行流与串行流</h2><p><strong>并行流</strong>就是把一个内容分成多个数据块，并用不同的线程分别处理每个数据块的流。</p>
<p>Java 8 中将并行进行了优化，我们可以很容易的对数据进行并行操作。Stream API 可以声明性地通过 <code>parallel()</code>与<code>sequential()</code>在并行流与顺序流之间进行切换。</p>
<h3 id="Fork-Join框架"><a href="#Fork-Join框架" class="headerlink" title="Fork/Join框架"></a>Fork/Join框架</h3><h4 id="了解Fork-Join框架"><a href="#了解Fork-Join框架" class="headerlink" title="了解Fork/Join框架"></a>了解Fork/Join框架</h4><p>Fork/Join框架：就是在必要的情况下，将一个大任务，进行拆分(fork)成若干个小任务（拆到不可再拆时），再将一个个的小任务运算的结果进行 join 汇总.</p>
<p><img src="http://img.bcoder.top/2017.07.22/13.png" alt="Java8学习"></p>
<h4 id="Fork-Join框架与传统线程池的区别"><a href="#Fork-Join框架与传统线程池的区别" class="headerlink" title="Fork/Join框架与传统线程池的区别"></a>Fork/Join框架与传统线程池的区别</h4><p>Fork/Join框架采用 <strong>“工作窃取”</strong>模式（work-stealing）：<br>当执行新的任务时它可以将其拆分分成更小的任务执行，并将小任务加到线程队列中，然后再从一个随机线程的队列中<strong>偷一个</strong>并把它放在自己的队列中。</p>
<p>相对于一般的线程池实现,fork/join框架的优势体现在对其中包含的任务的处理方式上.在一般的线程池中,如果一个线程正在执行的任务由于某些原因无法继续运行,那么该线程会处于等待状态.而在fork/join框架实现中,如果某个子问题由于等待另外一个子问题的完成而无法继续运行.那么处理该子问题的线程会主动寻找其他尚未运行的子问题来执行.这种方式减少了线程的等待时间,提高了性能。</p>
<p>demo：fork/join框架使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForkJoinCalculate</span> <span class="keyword">extends</span> <span class="title">RecursiveTask</span>&lt;<span class="title">Long</span>&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1564156415641L</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">long</span> start;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">long</span> end;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> THRESHOLD=<span class="number">10000L</span>;<span class="comment">//临界值</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ForkJoinCalculate</span><span class="params">(<span class="keyword">long</span> start,<span class="keyword">long</span> end)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.start = start;</span><br><span class="line">		<span class="keyword">this</span>.end = end;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> Long <span class="title">compute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">long</span> length = end - start;</span><br><span class="line">		<span class="keyword">if</span>(length&lt;THRESHOLD)&#123;</span><br><span class="line">			<span class="keyword">long</span> sum=<span class="number">0</span>;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">long</span> i = <span class="number">0</span>; i &lt;=end; i++) &#123;</span><br><span class="line">				sum+=i;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> sum;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">long</span> middle = (start+end)/<span class="number">2</span>;</span><br><span class="line">			ForkJoinCalculate left = <span class="keyword">new</span> ForkJoinCalculate(start, middle);</span><br><span class="line">			left.fork();		</span><br><span class="line">			ForkJoinCalculate right = <span class="keyword">new</span> ForkJoinCalculate(middle+<span class="number">1</span>, end);</span><br><span class="line">			right.fork();	</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">return</span> left.join()+right.join();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestForkJoin</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">		</span><br><span class="line">		ForkJoinPool pool = <span class="keyword">new</span> ForkJoinPool();</span><br><span class="line">		ForkJoinTask&lt;Long&gt; task = <span class="keyword">new</span> ForkJoinCalculate(<span class="number">0L</span>, <span class="number">100000000L</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">long</span> sum = pool.invoke(task);</span><br><span class="line">		System.out.println(sum);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">"耗费的时间为: "</span> + (end - start)); </span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">long</span> sum = <span class="number">0L</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">long</span> i = <span class="number">0L</span>; i &lt;= <span class="number">100000000L</span>; i++) &#123;</span><br><span class="line">			sum += i;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		System.out.println(sum);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">"耗费的时间为: "</span> + (end - start));</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>java8对并行流进行了改善：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test3()&#123;</span><br><span class="line">	long start &#x3D; System.currentTimeMillis();</span><br><span class="line">	</span><br><span class="line">	Long sum &#x3D; LongStream.rangeClosed(0L, 10000000000L)</span><br><span class="line">						 .parallel()</span><br><span class="line">						 .sum();</span><br><span class="line">	</span><br><span class="line">	System.out.println(sum);</span><br><span class="line">	</span><br><span class="line">	long end &#x3D; System.currentTimeMillis();</span><br><span class="line">	</span><br><span class="line">	System.out.println(&quot;耗费的时间为: &quot; + (end - start));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="Optionall类"><a href="#Optionall类" class="headerlink" title="Optionall类"></a>Optionall类</h2><h3 id="Optional类简介"><a href="#Optional类简介" class="headerlink" title="Optional类简介"></a>Optional类简介</h3><p>Optional<T> 类(java.util.Optional) 是一个容器类，代表一个值存在或不存在，原来用 null 表示一个值不存在，现在 Optional 可以更好的表达这个概念。并且<strong>可以避免空指针异常</strong>。</p>
<h3 id="Optional类常用方法"><a href="#Optional类常用方法" class="headerlink" title="Optional类常用方法"></a>Optional类常用方法</h3><p>Optional.of(T t) : 创建一个 Optional 实例<br>Optional.empty() : 创建一个空的 Optional 实例<br>Optional.ofNullable(T t):若 t 不为 null,创建 Optional 实例,否则创建空实例<br>isPresent() : 判断是否包含值<br>orElse(T t) : 如果调用对象包含值，返回该值，否则返回t<br>orElseGet(Supplier s) :如果调用对象包含值，返回该值，否则返回 s 获取的值<br>map(Function f): 如果有值对其处理，并返回处理后的Optional，否则返回 Optional.empty()<br>flatMap(Function mapper):与 map 类似，要求返回值必须是Optional</p>
<p>demo：Optional简单使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Optional&lt;Employee&gt; op = Optional.of(<span class="keyword">new</span> Employee());</span><br><span class="line">	Employee employee = op.get();</span><br><span class="line">	System.out.println(employee);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Employee [name&#x3D;null, age&#x3D;0, salary&#x3D;0.0, status&#x3D;null]</span><br></pre></td></tr></table></figure>

<p>demo：Optional.empty() 和Optional.ofNullable(T t)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Optional&lt;Employee&gt; op = Optional.empty();</span><br><span class="line">	System.out.println(op.get());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Optional&lt;Employee&gt; op = Optional.ofNullable(<span class="keyword">null</span>);</span><br><span class="line">	System.out.println(op.get());</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由于两个实例创建的实例都是null，因此调用get方法都会报异常</p>
<p>isPresent() : 判断是否包含值<br>isPresent() : 判断是否包含值<br>orElse(T t) : 如果调用对象包含值，返回该值，否则返回t<br>demo：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Optional&lt;Employee&gt; op = Optional.ofNullable(<span class="keyword">new</span> Employee());</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(op.isPresent())&#123;</span><br><span class="line">		System.out.println(<span class="string">"1:"</span>+op.get());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	Optional&lt;Employee&gt; op1 = Optional.ofNullable(<span class="keyword">null</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(op1.isPresent())&#123;</span><br><span class="line">		System.out.println(<span class="string">"2:"</span>+op1.get());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	Optional&lt;Employee&gt; op3 = Optional.ofNullable(<span class="keyword">new</span> Employee());</span><br><span class="line">	Employee emp = op3.orElse(<span class="keyword">new</span> Employee(<span class="string">"张三"</span>));</span><br><span class="line">	System.out.println(<span class="string">"3:"</span>+emp);</span><br><span class="line">	</span><br><span class="line">	Optional&lt;Employee&gt; op4 = Optional.ofNullable(<span class="keyword">null</span>);</span><br><span class="line">	Employee emp2 = op4.orElse(<span class="keyword">new</span> Employee(<span class="string">"张三"</span>));</span><br><span class="line">	System.out.println(<span class="string">"4:"</span>+emp2);</span><br><span class="line">	</span><br><span class="line">	Employee emp3 = op.orElseGet(() -&gt; <span class="keyword">new</span> Employee());</span><br><span class="line">	System.out.println(<span class="string">"5:"</span>+emp3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1:Employee [name&#x3D;null, age&#x3D;0, salary&#x3D;0.0, status&#x3D;null]</span><br><span class="line">3:Employee [name&#x3D;null, age&#x3D;0, salary&#x3D;0.0, status&#x3D;null]</span><br><span class="line">4:Employee [name&#x3D;张三, age&#x3D;0, salary&#x3D;0.0, status&#x3D;null]</span><br><span class="line">5:Employee [name&#x3D;null, age&#x3D;0, salary&#x3D;0.0, status&#x3D;null]</span><br></pre></td></tr></table></figure>



<p>map(Function f): 如果有值对其处理，并返回处理后的Optional，否则返回 Optional.empty()<br>flatMap(Function mapper):与 map 类似，要求返回值必须是Optional<br>demo：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test5</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Optional&lt;Employee&gt; op = Optional.of(<span class="keyword">new</span> Employee(<span class="string">"张三"</span>, <span class="number">18</span>, <span class="number">9999.99</span>));</span><br><span class="line">	</span><br><span class="line">	Optional&lt;String&gt; op2 = op.map(Employee::getName);</span><br><span class="line">	System.out.println(op2.get());</span><br><span class="line">	</span><br><span class="line">	Optional&lt;String&gt; op3 = op.flatMap((e) -&gt; Optional.of(e.getName()));</span><br><span class="line">	System.out.println(op3.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">张三</span><br><span class="line">张三</span><br></pre></td></tr></table></figure>



          
            <br>
            
  
    
    

<section class="widget copyright  desktop mobile">
  <div class='content'>
    
      <blockquote>
        
          
            <p>博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</p>

          
        
          
            <p>本文永久链接是：<a href=https://www.bcoder.top/2017/07/22/Java8%E5%AD%A6%E4%B9%A0/>https://www.bcoder.top/2017/07/22/Java8%E5%AD%A6%E4%B9%A0/</a></p>
          
        
      </blockquote>
    
  </div>
</section>

  

  
    
    

<section class="widget qrcode  desktop mobile">
  

  <div class='content article-entry'>
    
      
        <div class='fancybox'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/qrcode/wiki_volantis.png'
        
          height='64px'
        ></div>
      
    
      
        <div class='fancybox'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/qrcode/wiki_volantis.png'
        
          height='64px'
        ></div>
      
    
  </div>
</section>

  


          
        </div>
        
          


  <section class='meta' id="footer-meta">
    <div class='new-meta-box'>
      
        
          <div class="new-meta-item date" itemprop="dateUpdated" datetime="2020-01-21T18:44:03+08:00">
  <a class='notlink'>
    <i class="fas fa-edit fa-fw" aria-hidden="true"></i>
    <p>更新于：2020-01-21 18:44:03</p>
  </a>
</div>

        
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/tags/java8/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>java8</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/tags/javase%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>javase高级特性</p></a></div>


        
      
        
          

        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title="" rel="external nofollow noopener noreferrer"
          
          href="http://connect.qq.com/widget/shareqq/index.html?url=https://www.bcoder.top/2017/07/22/Java8%E5%AD%A6%E4%B9%A0/&title=Java8学习 - zln's blog&summary=Java8 新特性介绍
速度更快
代码更少（增加了新的语法 Lambda  表达式）
强大的Stream API
便于并行
最大化减少空指针异常Optional
"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qq.png">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title="" rel="external nofollow noopener noreferrer"
          
          href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://www.bcoder.top/2017/07/22/Java8%E5%AD%A6%E4%B9%A0/&title=Java8学习 - zln's blog&summary=Java8 新特性介绍
速度更快
代码更少（增加了新的语法 Lambda  表达式）
强大的Stream API
便于并行
最大化减少空指针异常Optional
"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qzone.png">
          
        </a>
      
    
      
        <a class="-mob-share-weibo" title="" rel="external nofollow noopener noreferrer"
          
          href="http://service.weibo.com/share/share.php?url=https://www.bcoder.top/2017/07/22/Java8%E5%AD%A6%E4%B9%A0/&title=Java8学习 - zln's blog&summary=Java8 新特性介绍
速度更快
代码更少（增加了新的语法 Lambda  表达式）
强大的Stream API
便于并行
最大化减少空指针异常Optional
"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/weibo.png">
          
        </a>
      
    
  </div>
</div>



        
      
    </div>
  </section>


        
        
          <div class="prev-next">
            
              <a class='prev' href='/2017/08/01/Java%E5%B9%B6%E5%8F%91%E5%BA%93-JUC-%E5%85%A5%E9%97%A8/'>
                <p class='title'><i class="fas fa-chevron-left" aria-hidden="true"></i>Java并发库(JUC)入门</p>
                <p class='content'>在 Java 5.0 提供了 java.util.concurrent （简称JUC ）包，在此包中增加了在并发编程中很常用的实用工具类，用于定义类似于线程的自定义子系统，包括线程池、异步 IO...</p>
              </a>
            
            
              <a class='next' href='/2017/06/23/%E6%BC%AB%E7%94%BB%EF%BC%9A%E4%BB%80%E4%B9%88%E6%98%AF%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%EF%BC%9F/'>
                <p class='title'>漫画:什么是动态规划？<i class="fas fa-chevron-right" aria-hidden="true"></i></p>
                <p class='content'>









** 题目： **
有一座高度是10级台阶的楼梯，从下往上走，每跨一步只能向上1级或者2级台阶。要求用程序来求出一共有多少种走法。
比如，每次走1级台阶，一共走10步，这是其...</p>
              </a>
            
          </div>
        
      </section>
    </article>
  

  
    <!-- 显示推荐文章和评论 -->



  


  




<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->



  <script>
    window.subData = {
      title: 'Java8学习',
      tools: true
    }
  </script>


</div>
<aside class='l_side'>
  
  

  
    
    


  <section class="widget toc-wrapper shadow desktop mobile">
    
  <header>
    
      <i class="fas fa-list fa-fw" aria-hidden="true"></i><span class='name'>本文目录</span>
    
  </header>


    <div class='content'>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Java8-新特性介绍"><span class="toc-text">Java8 新特性介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lambda-表达式"><span class="toc-text">Lambda 表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#为什么使用Lambda表达式"><span class="toc-text">为什么使用Lambda表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lambda表达式的基本语法"><span class="toc-text">Lambda表达式的基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Java-内置四大核心函数式接口"><span class="toc-text">Java 内置四大核心函数式接口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#其他接口"><span class="toc-text">其他接口</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#方法引用与构造器引用"><span class="toc-text">方法引用与构造器引用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#方法引用"><span class="toc-text">方法引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#构造器引用"><span class="toc-text">构造器引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数组引用"><span class="toc-text">数组引用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Stream-API"><span class="toc-text">Stream API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#什么是-Stream"><span class="toc-text">什么是 Stream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stream-的操作三个步骤"><span class="toc-text">Stream  的操作三个步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建-Stream"><span class="toc-text">创建 Stream</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#由数组创建流"><span class="toc-text">由数组创建流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#由值创建流"><span class="toc-text">由值创建流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#由函数创建流：创建无限流"><span class="toc-text">由函数创建流：创建无限流</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stream中间操作"><span class="toc-text">Stream中间操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stream-的终止操作"><span class="toc-text">Stream  的终止操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#并行流与串行流"><span class="toc-text">并行流与串行流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Fork-Join框架"><span class="toc-text">Fork&#x2F;Join框架</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#了解Fork-Join框架"><span class="toc-text">了解Fork&#x2F;Join框架</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fork-Join框架与传统线程池的区别"><span class="toc-text">Fork&#x2F;Join框架与传统线程池的区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Optionall类"><span class="toc-text">Optionall类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Optional类简介"><span class="toc-text">Optional类简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Optional类常用方法"><span class="toc-text">Optional类常用方法</span></a></li></ol></li></ol>
    </div>
  </section>


  


</aside>


  
  <footer class="clearfix">
    <br><br>
    
      
        <div class="aplayer-container">
          

  
    <meting-js
      theme='#1BCDFC'
      autoplay='false'
      volume='0.7'
      loop='all'
      order='list'
      fixed='false'
      list-max-height='340px'
      server='netease'
      type='playlist'
      id='3175833810'
      list-folded='true'>
    </meting-js>
  


        </div>
      
    
      
        <br>
        <div class="social-wrapper">
          
            
              <a href="/atom.xml"
                class="social fas fa-rss flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="mailto:me@xaoxuu.com"
                class="social fas fa-envelope flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="https://github.com/xaoxuu"
                class="social fab fa-github flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="https://music.163.com/#/user/home?id=63035382"
                class="social fas fa-headphones-alt flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
        </div>
      
    
      
        <div><p>Blog content follows the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener">Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0) License</a></p>
</div>
      
    
      
        Use
        <a href="https://bcoder,top/" target="_blank" class="codename">周陆宁</a>
        as theme
        
          , 
          total visits
          <span id="busuanzi_value_site_pv"><i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span>
          times
        
      
    
      
        <div class='copyright'>
        <p><a href="https://xaoxuu.com" target="_blank" rel="noopener">Copyright © 2017-2020 Mr. X</a></p>

        </div>
      
    
  </footer>

<script>setLoadingBarProgress(80);</script>


      <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
  </div>
  
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4/dist/jquery.min.js"></script>


  <script>
    
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/" || "/";
    if (!ROOT.endsWith('/')) ROOT += '/';
  </script>


  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/instant_page.js" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>



  
<script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>

  <script type="text/javascript">
    $(function() {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>


  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>



  
  
  
    
<script src="https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script>

    <script type="text/javascript">
      $(function(){
        var imgs=["https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg"];
        if ('true' == 'true') {
          function shuffle(arr){
            /*From countercurrent-time*/
            var n = arr.length;
            while(n--) {
              var index = Math.floor(Math.random() * n);
              var temp = arr[index];
              arr[index] = arr[n];
              arr[n] = temp;
            }
          }
          shuffle(imgs);
        }
        if ('.cover') {
          $('.cover').backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        } else {
          $.backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        }
      });
    </script>
  



  
    
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js" async></script>

  
    
<script src="https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js" async></script>

  










  
<script src="/js/app.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2.1/js/search.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/comment_typing.js"></script>



<!-- 复制 -->

  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="fas fa-copy"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copyed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-clipboard-check');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPYED';
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-exclamation-triangle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
      });
    }
    initCopyCode();
  }(window, document);
</script>




<!-- fancybox -->

  <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  let LAZY_LOAD_IMAGE = "";
  $(".article-entry").find("div.fancybox").find("img").each(function () {
      var element = document.createElement("a");
      $(element).attr("data-fancybox", "gallery");
      $(element).attr("href", $(this).attr("src"));
      /* 图片采用懒加载处理时,
       * 一般图片标签内会有个属性名来存放图片的真实地址，比如 data-original,
       * 那么此处将原本的属性名src替换为对应属性名data-original,
       * 修改如下
       */
       if (LAZY_LOAD_IMAGE) {
         $(element).attr("href", $(this).attr("data-original"));
       }
      $(this).wrap(element);
  });
</script>






  <script>setLoadingBarProgress(100);</script>
</body>
</html>
